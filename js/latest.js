// Generated by CoffeeScript 1.3.3
var widget;widget={server:"http://librize.com",root:"http://librize.github.com/widgets",default_params:{},style_loaded:{},addStyle:function(e){return $("head").append('<link rel="stylesheet" type="text/css" href="'+e+'" />')},getQueryParams:function(e){var t,n,r,i,s,o,u,a;e==null&&(e="");r={};u=e.replace(/^.*\?/,"").split("&");for(s=0,o=u.length;s<o;s++){n=u[s];a=n.split("="),t=a[0],i=a[1];r[t]=i}return r},getDefaultParams:function(e){var t;t=this.getQueryParams(e);return this.default_params={place:t.place||void 0,limit:t.limit||5,height:t.height||75,width:t.width||0,theme:t.theme||"simple"}},show:function(e){var t,n,r,i,s,o,u=this;r=e.attr("data-place")||this.default_params.place;n=e.attr("data-limit")||this.default_params.limit;t=e.attr("data-height")||this.default_params.height;o=e.attr("data-width")||this.default_params.width;i=e.attr("data-theme")||this.default_params.theme;if(r){(this.style_loaded[i]==null?i!=="none":void 0)&&this.addStyle(""+widget.root+"/css/"+i+".css");this.style_loaded[i]=!0;s=""+widget.server+"/places/"+r+"/place_items.json?limit="+n+"&callback=?";return $.getJSON(s,function(n){var r,s,a,f,l,c;a='<ul class="'+i+'">';for(l=0,c=n.length;l<c;l++){r=n[l];o&&(r.image=r.image.replace(/_SX\d+_/,"_SX"+o+"_"));t&&(r.image=r.image.replace(/_SX\d+_/,"_SY"+t+"_"));s=t?t:o*1.3;f=o?o:t/1.3;a+=r.image==="no-item-medium-image.jpg"?'<li style="height:'+s+"px; width:"+f+'px" class="noimage"><a href="'+r.url+'"><span>'+r.title+"</span></a></li>":'<li><a href="'+r.url+'"><img src="'+r.image+'" alt="'+r.title+'" /></a></li>'}a+="</ul>";e.html(a);return u.updated(e)})}return typeof console!="undefined"&&console!==null?console.log("Place ID required."):void 0},updated:function(e){}};$(function(){var e,t,n,r,i,s,o;t=$('script[src^="'+widget.root+'/js/latest.js"]');n=$(t).attr("src");widget.getDefaultParams(n);s=$("div.librize-widget.latest");o=[];for(r=0,i=s.length;r<i;r++){e=s[r];o.push(widget.show($(e)))}return o});