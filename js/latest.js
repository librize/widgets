// Generated by CoffeeScript 1.3.1
var widget;widget={server:"http://librize.com",root:"http://librize.github.com/widgets",default_params:{},style_loaded:{},addStyle:function(a){return $("head").append('<link rel="stylesheet" type="text/css" href="'+a+'" />')},getQueryParams:function(a){var b,c,d,e,f,g,h,i;d={};h=a.replace(/^.*\?/,"").split("&");for(f=0,g=h.length;f<g;f++){c=h[f];i=c.split("="),b=i[0],e=i[1];d[b]=e}return d},getDefaultParams:function(a){var b;b=this.getQueryParams(a);return this.default_params={place:b.place||void 0,limit:b.limit||5,height:b.height||75,width:b.width||0,theme:b.theme||"simple"}},show:function(a){var b,c,d,e,f,g,h=this;d=a.attr("data-place")||this.default_params.place;c=a.attr("data-limit")||this.default_params.limit;b=a.attr("data-height")||this.default_params.height;g=a.attr("data-width")||this.default_params.width;e=a.attr("data-theme")||this.default_params.theme;if(d){(this.style_loaded[e]==null?e!=="none":void 0)&&this.addStyle(""+widget.root+"/css/"+e+".css");this.style_loaded[e]=!0;f=""+widget.server+"/places/"+d+"/place_items.json?limit="+c+"&height="+b+"&callback=?";return $.getJSON(f,function(b){var c,d,f,i;d='<ul class="'+e+'">';for(f=0,i=b.length;f<i;f++){c=b[f];g&&(c.image=c.image.replace(/_SL\d+_/,"_SX"+g+"_"));d+='<li><a href="'+c.url+'"><img src="'+c.image+'" alt="'+c.title+'" /></a></li>'}d+="</ul>";a.html(d);return h.updated(a)})}return typeof console!="undefined"&&console!==null?console.log("Place ID required."):void 0},updated:function(a){}};$(function(){var a,b,c,d,e,f,g;b=$('script[src^="'+widget.root+'/js/latest.js"]');c=$(b).attr("src");widget.getDefaultParams(c);f=$("div.librize-widget.latest");g=[];for(d=0,e=f.length;d<e;d++){a=f[d];g.push(widget.show($(a)))}return g});